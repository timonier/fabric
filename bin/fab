#!/bin/sh

docker run \
    $(env | cut -d= -f1 | awk '{print "-e", $1}') \
    -i=$([ -t 0 ] && echo "true" || echo "false") \
    -t=$([ -t 0 ] && echo "true" || echo "false") \
    -v /etc/group:/etc/group:ro \
    -v /etc/localtime:/etc/localtime:ro \
    -v /etc/passwd:/etc/passwd:ro \
    -v /etc/timezone:/etc/timezone:ro \
    -v "${HOME}:${HOME}" \
    -v "${PWD}:${PWD}" \
    -w "${PWD}" \
    --rm \
    ${IMAGE:-timonier/fabric}:${TAG:-1.11.1} fab "$@"
